---
layout: default
title: C++轻松之旅 02 抽象 抽取取事务的本质特性
---
<p class="paragraph">
面向对象编程从面向对象设计开始, 而面向对象设计从抽象开始.
</p>

<p class="paragraph">
抽象的概念就是观察一群"事物"(如汽车, 发票或正在执行的计算机程序), 并认识到它们具有一些共同的主题. 你可以忽略不重要的区别, 只记录能表现事物特征的关键数据项(如许可证号码, 预定数量或地址空间边界等). 当你这样做的时候, 就是在进行"抽象", 所存储的数据类型就是"抽象数据类型"(C++使用类class这个特性来实现它).
</p>

<p class="paragraph">
请使用我们新发现的技巧"抽象", 考虑一下现实世界事物的相似之处. 如下: 一辆小汽车和一个软件. 它们的共同特性列于下表.
</p>

<p class="paragraph">

</p>

汽车实例 | 软件实例: 一个排序程序 | 对象特征
------- | ------- | --------
Car | Sort | 整个事物具有一个名字
输入: 燃料和汽油 | 输入: 一个未排序的数组 |
输出: 交通运输 | 输出: 一个已排序的数组 | 定义良好的输入和输出
发动机, 传感器, 泵等 | 模块, 头文件, 函数, 数据结构 | 由更小的自包含的对象组成
世界上存在很多汽车, 有许多不同的品种 | 它的实现应该允许几个用户同时排序, 不需要依赖一个全局的临时工作空间 | 可有很多的实例对象
燃料泵并不依赖并影响挡车板清洗器 | 读取记录应该与关键的比较程序独立 | 更小的自包含的对象无相互作用, 除非它是通过定义良好的接口进行
计时器的计时变化并不是驾车者的任务, 所以驾驶员不能直接控制计时器对其进行修改 | 用户应该并不需要知道程序所使用的特定的排序算法(如快速排序, 堆排序, Shell 排序等) | 不能直接操纵或甚至看到实现细节
可以更换一个更好的发动机, 而无须更改驾驶员的操作方法 | 实现者应该能够在不影响用户使用的前提下替换一种更好的排序算法 | 可以在不修改用户接口的情况下修改实现

注意: 在软件的属性里, 有许多以"应该"的形式出现. OOP 语言如 C++ 提供了一些特性, 把上面的这些"愿望"变成了"现实". 在软件中, 抽象是非常有用的, 因为它允许程序员实现下列目标:

* 隐藏不相关的细节, 把注意力集中在本质特征上
* 向外部世界提供一个"黑盒子"接口. 接口确定了施加在对象之上的有关操作的集合, 但它并不提示对象在内部是怎样实现它们的
* 把一个复杂的系统分解成几个相互独立的组成部分. 这可以做到分工明确, 避免组件之间不符合规则的相互作用
* 重用和共享代码

C语言 通过允许用户定义新的类型(struct, enum)来支持抽象. 用户定义类型几乎和预定义类型(int, char 等)一样方便, 使用形式也几乎一样. 我们说"几乎一样方便"是因为 C语言 并不允许在用户定义类型中重新定义 * << [] + 等预定义的操作符. C++ 则消除了这个障碍. C++ 同时提供自动和受控制的初始化, 数据在生命期结束后自动清除以及隐式类型转换.

抽象建立了一种抽象数据类型, C++ 使用类(class)这个特性来实现它. 它提供了一种自上而下的, 观察数据类型属性的方法来看待封装: 把用户定义类型中的各种数据和方法组合在一起. 它同时也提供了一种自底向上的观点来看待封装: 把各种数据和方法组合在一起实现一种用户定义类型.
